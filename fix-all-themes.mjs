import { drizzle } from 'drizzle-orm/mysql2';
import { eq } from 'drizzle-orm';
import mysql from 'mysql2/promise';
import * as schema from './drizzle/schema.js';

const connection = await mysql.createConnection(process.env.DATABASE_URL);
const db = drizzle(connection, { schema, mode: 'default' });

// Complete theme definitions with ALL required CSS variables
const completeThemes = [
  {
    name: 'Midnight Blue',
    colors: {
      primary: '217 91% 60%',
      'primary-foreground': '210 40% 98%',
      secondary: '217 91% 70%',
      'secondary-foreground': '222 47% 11%',
      accent: '189 94% 43%',
      'accent-foreground': '210 40% 98%',
      background: '222 47% 11%',
      foreground: '210 40% 98%',
      card: '222 47% 15%',
      'card-foreground': '210 40% 98%',
      popover: '222 47% 15%',
      'popover-foreground': '210 40% 98%',
      muted: '217 33% 17%',
      'muted-foreground': '210 40% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '210 40% 98%',
      border: '217 33% 20%',
      input: '217 33% 20%',
      ring: '217 91% 60%',
    },
  },
  {
    name: 'Sunset Orange',
    colors: {
      primary: '24 95% 53%',
      'primary-foreground': '60 9% 98%',
      secondary: '24 95% 63%',
      'secondary-foreground': '20 14% 10%',
      accent: '346 77% 50%',
      'accent-foreground': '60 9% 98%',
      background: '20 14% 10%',
      foreground: '60 9% 98%',
      card: '20 14% 14%',
      'card-foreground': '60 9% 98%',
      popover: '20 14% 14%',
      'popover-foreground': '60 9% 98%',
      muted: '24 20% 18%',
      'muted-foreground': '60 9% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '60 9% 98%',
      border: '24 20% 22%',
      input: '24 20% 22%',
      ring: '24 95% 53%',
    },
  },
  {
    name: 'Forest Green',
    colors: {
      primary: '142 76% 36%',
      'primary-foreground': '140 10% 98%',
      secondary: '142 76% 46%',
      'secondary-foreground': '140 20% 8%',
      accent: '173 58% 39%',
      'accent-foreground': '140 10% 98%',
      background: '140 20% 8%',
      foreground: '140 10% 98%',
      card: '140 20% 12%',
      'card-foreground': '140 10% 98%',
      popover: '140 20% 12%',
      'popover-foreground': '140 10% 98%',
      muted: '142 30% 16%',
      'muted-foreground': '140 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '140 10% 98%',
      border: '142 30% 20%',
      input: '142 30% 20%',
      ring: '142 76% 36%',
    },
  },
  {
    name: 'Purple Haze',
    colors: {
      primary: '271 81% 56%',
      'primary-foreground': '270 10% 98%',
      secondary: '271 81% 66%',
      'secondary-foreground': '270 30% 8%',
      accent: '316 70% 50%',
      'accent-foreground': '270 10% 98%',
      background: '270 30% 8%',
      foreground: '270 10% 98%',
      card: '270 30% 12%',
      'card-foreground': '270 10% 98%',
      popover: '270 30% 12%',
      'popover-foreground': '270 10% 98%',
      muted: '271 40% 16%',
      'muted-foreground': '270 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '270 10% 98%',
      border: '271 40% 20%',
      input: '271 40% 20%',
      ring: '271 81% 56%',
    },
  },
  {
    name: 'Crimson Red',
    colors: {
      primary: '0 84% 60%',
      'primary-foreground': '0 5% 98%',
      secondary: '0 84% 70%',
      'secondary-foreground': '0 20% 8%',
      accent: '348 83% 47%',
      'accent-foreground': '0 5% 98%',
      background: '0 20% 8%',
      foreground: '0 5% 98%',
      card: '0 20% 12%',
      'card-foreground': '0 5% 98%',
      popover: '0 20% 12%',
      'popover-foreground': '0 5% 98%',
      muted: '0 30% 16%',
      'muted-foreground': '0 5% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '0 5% 98%',
      border: '0 30% 20%',
      input: '0 30% 20%',
      ring: '0 84% 60%',
    },
  },
  {
    name: 'Ocean Teal',
    colors: {
      primary: '174 72% 56%',
      'primary-foreground': '174 10% 98%',
      secondary: '174 72% 66%',
      'secondary-foreground': '174 30% 8%',
      accent: '187 85% 53%',
      'accent-foreground': '174 10% 98%',
      background: '174 30% 8%',
      foreground: '174 10% 98%',
      card: '174 30% 12%',
      'card-foreground': '174 10% 98%',
      popover: '174 30% 12%',
      'popover-foreground': '174 10% 98%',
      muted: '174 40% 16%',
      'muted-foreground': '174 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '174 10% 98%',
      border: '174 40% 20%',
      input: '174 40% 20%',
      ring: '174 72% 56%',
    },
  },
  {
    name: 'Golden Yellow',
    colors: {
      primary: '45 93% 47%',
      'primary-foreground': '45 10% 98%',
      secondary: '45 93% 57%',
      'secondary-foreground': '45 20% 8%',
      accent: '38 92% 50%',
      'accent-foreground': '45 10% 98%',
      background: '45 20% 8%',
      foreground: '45 10% 98%',
      card: '45 20% 12%',
      'card-foreground': '45 10% 98%',
      popover: '45 20% 12%',
      'popover-foreground': '45 10% 98%',
      muted: '45 30% 16%',
      'muted-foreground': '45 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '45 10% 98%',
      border: '45 30% 20%',
      input: '45 30% 20%',
      ring: '45 93% 47%',
    },
  },
  {
    name: 'Rose Pink',
    colors: {
      primary: '330 81% 60%',
      'primary-foreground': '330 10% 98%',
      secondary: '330 81% 70%',
      'secondary-foreground': '330 20% 8%',
      accent: '16 90% 66%',
      'accent-foreground': '330 10% 98%',
      background: '330 20% 8%',
      foreground: '330 10% 98%',
      card: '330 20% 12%',
      'card-foreground': '330 10% 98%',
      popover: '330 20% 12%',
      'popover-foreground': '330 10% 98%',
      muted: '330 30% 16%',
      'muted-foreground': '330 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '330 10% 98%',
      border: '330 30% 20%',
      input: '330 30% 20%',
      ring: '330 81% 60%',
    },
  },
  {
    name: 'Arctic Ice',
    colors: {
      primary: '200 98% 39%',
      'primary-foreground': '200 10% 98%',
      secondary: '200 98% 49%',
      'secondary-foreground': '200 30% 8%',
      accent: '180 100% 90%',
      'accent-foreground': '200 30% 8%',
      background: '200 30% 8%',
      foreground: '200 10% 98%',
      card: '200 30% 12%',
      'card-foreground': '200 10% 98%',
      popover: '200 30% 12%',
      'popover-foreground': '200 10% 98%',
      muted: '200 40% 16%',
      'muted-foreground': '200 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '200 10% 98%',
      border: '200 40% 20%',
      input: '200 40% 20%',
      ring: '200 98% 39%',
    },
  },
  {
    name: 'Lavender Dream',
    colors: {
      primary: '270 50% 70%',
      'primary-foreground': '270 10% 98%',
      secondary: '270 50% 80%',
      'secondary-foreground': '270 20% 8%',
      accent: '280 60% 60%',
      'accent-foreground': '270 10% 98%',
      background: '270 20% 8%',
      foreground: '270 10% 98%',
      card: '270 20% 12%',
      'card-foreground': '270 10% 98%',
      popover: '270 20% 12%',
      'popover-foreground': '270 10% 98%',
      muted: '270 30% 16%',
      'muted-foreground': '270 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '270 10% 98%',
      border: '270 30% 20%',
      input: '270 30% 20%',
      ring: '270 50% 70%',
    },
  },
  {
    name: 'Emerald City',
    colors: {
      primary: '140 60% 50%',
      'primary-foreground': '140 10% 98%',
      secondary: '140 60% 60%',
      'secondary-foreground': '140 25% 8%',
      accent: '80 70% 50%',
      'accent-foreground': '140 10% 98%',
      background: '140 25% 8%',
      foreground: '140 10% 98%',
      card: '140 25% 12%',
      'card-foreground': '140 10% 98%',
      popover: '140 25% 12%',
      'popover-foreground': '140 10% 98%',
      muted: '140 35% 16%',
      'muted-foreground': '140 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '140 10% 98%',
      border: '140 35% 20%',
      input: '140 35% 20%',
      ring: '140 60% 50%',
    },
  },
  {
    name: 'Chocolate Brown',
    colors: {
      primary: '25 75% 47%',
      'primary-foreground': '25 10% 98%',
      secondary: '25 75% 57%',
      'secondary-foreground': '25 20% 8%',
      accent: '30 80% 55%',
      'accent-foreground': '25 10% 98%',
      background: '25 20% 8%',
      foreground: '25 10% 98%',
      card: '25 20% 12%',
      'card-foreground': '25 10% 98%',
      popover: '25 20% 12%',
      'popover-foreground': '25 10% 98%',
      muted: '25 30% 16%',
      'muted-foreground': '25 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '25 10% 98%',
      border: '25 30% 20%',
      input: '25 30% 20%',
      ring: '25 75% 47%',
    },
  },
  {
    name: 'Neon Cyan',
    colors: {
      primary: '180 100% 50%',
      'primary-foreground': '180 10% 98%',
      secondary: '180 100% 60%',
      'secondary-foreground': '180 30% 8%',
      accent: '200 100% 50%',
      'accent-foreground': '180 10% 98%',
      background: '180 30% 8%',
      foreground: '180 10% 98%',
      card: '180 30% 12%',
      'card-foreground': '180 10% 98%',
      popover: '180 30% 12%',
      'popover-foreground': '180 10% 98%',
      muted: '180 40% 16%',
      'muted-foreground': '180 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '180 10% 98%',
      border: '180 40% 20%',
      input: '180 40% 20%',
      ring: '180 100% 50%',
    },
  },
  {
    name: 'Burgundy Wine',
    colors: {
      primary: '345 63% 40%',
      'primary-foreground': '345 10% 98%',
      secondary: '345 63% 50%',
      'secondary-foreground': '345 25% 8%',
      accent: '0 70% 50%',
      'accent-foreground': '345 10% 98%',
      background: '345 25% 8%',
      foreground: '345 10% 98%',
      card: '345 25% 12%',
      'card-foreground': '345 10% 98%',
      popover: '345 25% 12%',
      'popover-foreground': '345 10% 98%',
      muted: '345 35% 16%',
      'muted-foreground': '345 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '345 10% 98%',
      border: '345 35% 20%',
      input: '345 35% 20%',
      ring: '345 63% 40%',
    },
  },
  {
    name: 'Mint Fresh',
    colors: {
      primary: '160 60% 50%',
      'primary-foreground': '160 10% 98%',
      secondary: '160 60% 60%',
      'secondary-foreground': '160 25% 8%',
      accent: '165 70% 60%',
      'accent-foreground': '160 10% 98%',
      background: '160 25% 8%',
      foreground: '160 10% 98%',
      card: '160 25% 12%',
      'card-foreground': '160 10% 98%',
      popover: '160 25% 12%',
      'popover-foreground': '160 10% 98%',
      muted: '160 35% 16%',
      'muted-foreground': '160 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '160 10% 98%',
      border: '160 35% 20%',
      input: '160 35% 20%',
      ring: '160 60% 50%',
    },
  },
  {
    name: 'Slate Gray',
    colors: {
      primary: '210 20% 50%',
      'primary-foreground': '210 10% 98%',
      secondary: '210 20% 60%',
      'secondary-foreground': '210 15% 8%',
      accent: '200 25% 60%',
      'accent-foreground': '210 10% 98%',
      background: '210 15% 8%',
      foreground: '210 10% 98%',
      card: '210 15% 12%',
      'card-foreground': '210 10% 98%',
      popover: '210 15% 12%',
      'popover-foreground': '210 10% 98%',
      muted: '210 20% 16%',
      'muted-foreground': '210 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '210 10% 98%',
      border: '210 20% 20%',
      input: '210 20% 20%',
      ring: '210 20% 50%',
    },
  },
  {
    name: 'Peach Sorbet',
    colors: {
      primary: '20 100% 70%',
      'primary-foreground': '20 10% 98%',
      secondary: '20 100% 80%',
      'secondary-foreground': '20 20% 8%',
      accent: '30 100% 70%',
      'accent-foreground': '20 10% 98%',
      background: '20 20% 8%',
      foreground: '20 10% 98%',
      card: '20 20% 12%',
      'card-foreground': '20 10% 98%',
      popover: '20 20% 12%',
      'popover-foreground': '20 10% 98%',
      muted: '20 30% 16%',
      'muted-foreground': '20 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '20 10% 98%',
      border: '20 30% 20%',
      input: '20 30% 20%',
      ring: '20 100% 70%',
    },
  },
  {
    name: 'Indigo Night',
    colors: {
      primary: '240 60% 50%',
      'primary-foreground': '240 10% 98%',
      secondary: '240 60% 60%',
      'secondary-foreground': '240 30% 8%',
      accent: '230 70% 55%',
      'accent-foreground': '240 10% 98%',
      background: '240 30% 8%',
      foreground: '240 10% 98%',
      card: '240 30% 12%',
      'card-foreground': '240 10% 98%',
      popover: '240 30% 12%',
      'popover-foreground': '240 10% 98%',
      muted: '240 40% 16%',
      'muted-foreground': '240 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '240 10% 98%',
      border: '240 40% 20%',
      input: '240 40% 20%',
      ring: '240 60% 50%',
    },
  },
  {
    name: 'Lime Zest',
    colors: {
      primary: '75 80% 50%',
      'primary-foreground': '75 10% 98%',
      secondary: '75 80% 60%',
      'secondary-foreground': '75 25% 8%',
      accent: '65 90% 55%',
      'accent-foreground': '75 10% 98%',
      background: '75 25% 8%',
      foreground: '75 10% 98%',
      card: '75 25% 12%',
      'card-foreground': '75 10% 98%',
      popover: '75 25% 12%',
      'popover-foreground': '75 10% 98%',
      muted: '75 35% 16%',
      'muted-foreground': '75 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '75 10% 98%',
      border: '75 35% 20%',
      input: '75 35% 20%',
      ring: '75 80% 50%',
    },
  },
  {
    name: 'Copper Rust',
    colors: {
      primary: '15 75% 50%',
      'primary-foreground': '15 10% 98%',
      secondary: '15 75% 60%',
      'secondary-foreground': '15 20% 8%',
      accent: '10 80% 55%',
      'accent-foreground': '15 10% 98%',
      background: '15 20% 8%',
      foreground: '15 10% 98%',
      card: '15 20% 12%',
      'card-foreground': '15 10% 98%',
      popover: '15 20% 12%',
      'popover-foreground': '15 10% 98%',
      muted: '15 30% 16%',
      'muted-foreground': '15 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '15 10% 98%',
      border: '15 30% 20%',
      input: '15 30% 20%',
      ring: '15 75% 50%',
    },
  },
  {
    name: 'Sapphire Blue',
    colors: {
      primary: '220 80% 50%',
      'primary-foreground': '220 10% 98%',
      secondary: '220 80% 60%',
      'secondary-foreground': '220 30% 8%',
      accent: '210 85% 55%',
      'accent-foreground': '220 10% 98%',
      background: '220 30% 8%',
      foreground: '220 10% 98%',
      card: '220 30% 12%',
      'card-foreground': '220 10% 98%',
      popover: '220 30% 12%',
      'popover-foreground': '220 10% 98%',
      muted: '220 40% 16%',
      'muted-foreground': '220 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '220 10% 98%',
      border: '220 40% 20%',
      input: '220 40% 20%',
      ring: '220 80% 50%',
    },
  },
  {
    name: 'Charcoal Black',
    colors: {
      primary: '0 0% 30%',
      'primary-foreground': '0 0% 98%',
      secondary: '0 0% 40%',
      'secondary-foreground': '0 0% 98%',
      accent: '0 0% 50%',
      'accent-foreground': '0 0% 98%',
      background: '0 0% 5%',
      foreground: '0 0% 98%',
      card: '0 0% 8%',
      'card-foreground': '0 0% 98%',
      popover: '0 0% 8%',
      'popover-foreground': '0 0% 98%',
      muted: '0 0% 12%',
      'muted-foreground': '0 0% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '0 0% 98%',
      border: '0 0% 15%',
      input: '0 0% 15%',
      ring: '0 0% 30%',
    },
  },
  {
    name: 'Coral Reef',
    colors: {
      primary: '10 90% 65%',
      'primary-foreground': '10 10% 98%',
      secondary: '10 90% 75%',
      'secondary-foreground': '10 20% 8%',
      accent: '5 95% 70%',
      'accent-foreground': '10 10% 98%',
      background: '10 20% 8%',
      foreground: '10 10% 98%',
      card: '10 20% 12%',
      'card-foreground': '10 10% 98%',
      popover: '10 20% 12%',
      'popover-foreground': '10 10% 98%',
      muted: '10 30% 16%',
      'muted-foreground': '10 10% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '10 10% 98%',
      border: '10 30% 20%',
      input: '10 30% 20%',
      ring: '10 90% 65%',
    },
  },
  {
    name: 'Sunset Orange',
    colors: {
      primary: '24 95% 53%',
      'primary-foreground': '60 9% 98%',
      secondary: '24 95% 63%',
      'secondary-foreground': '20 14% 10%',
      accent: '346 77% 50%',
      'accent-foreground': '60 9% 98%',
      background: '20 14% 10%',
      foreground: '60 9% 98%',
      card: '20 14% 14%',
      'card-foreground': '60 9% 98%',
      popover: '20 14% 14%',
      'popover-foreground': '60 9% 98%',
      muted: '24 20% 18%',
      'muted-foreground': '60 9% 70%',
      destructive: '0 84% 60%',
      'destructive-foreground': '60 9% 98%',
      border: '24 20% 22%',
      input: '24 20% 22%',
      ring: '24 95% 53%',
    },
  },
];

console.log(`Updating ${completeThemes.length} themes with complete color sets...`);

for (const themeData of completeThemes) {
  const [existingTheme] = await db
    .select()
    .from(schema.themes)
    .where(eq(schema.themes.name, themeData.name))
    .limit(1);

  if (existingTheme) {
    await db
      .update(schema.themes)
      .set({ colors: themeData.colors })
      .where(eq(schema.themes.id, existingTheme.id));
    console.log(`✓ Updated: ${themeData.name}`);
  } else {
    console.log(`✗ Not found: ${themeData.name}`);
  }
}

console.log('\n✓ All themes updated successfully!');
await connection.end();
process.exit(0);
